---
/**
 * AboutSection Component
 * Personal info section for homepage
 * Displays bio, skills, tools, and interests
 */
import { user, aboutConfig, getUserContent } from '../../data/user.config';
import { useI18n } from '../../utils/i18n';

const { currentLang } = useI18n();
const userContent = getUserContent(currentLang);
---

<div class="h-full box-border flex items-center justify-center px-4 py-6 overflow-y-auto">
  <div class="about-section max-w-6xl mx-auto w-full flex-shrink-0">
    <!-- Section Header -->
    <div class="section-header text-center mb-6 relative">
      <div class="absolute inset-0 -z-10 opacity-30">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-br from-[var(--md-sys-color-secondary)]/10 to-[var(--md-sys-color-primary)]/10 rounded-full blur-3xl"></div>
      </div>
      
      <h2 class="section-title inline-flex items-center justify-center gap-2 text-2xl md:text-3xl font-700 text-[var(--md-sys-color-on-surface)] mb-2">
        <span class="icon-wrapper inline-flex items-center justify-center w-10 h-10 bg-gradient-to-br from-[var(--md-sys-color-secondary-container)] to-[var(--md-sys-color-primary-container)] rounded-xl">
          <i class="i-carbon:user-avatar text-xl text-[var(--md-sys-color-secondary)]"></i>
        </span>
        <span class="bg-gradient-to-r from-[var(--md-sys-color-secondary)] to-[var(--md-sys-color-primary)] bg-clip-text text-transparent" data-i18n="about.title">
          关于我
        </span>
      </h2>
      <p class="section-subtitle text-xs md:text-sm text-[var(--md-sys-color-on-surface-variant)] font-500" data-user-content="description">
        {userContent.description}
      </p>
      
      <div class="flex items-center justify-center gap-2 mt-3">
        <div class="w-12 h-0.5 bg-gradient-to-r from-transparent to-[var(--md-sys-color-secondary)]/50"></div>
        <div class="w-2 h-2 rounded-full bg-[var(--md-sys-color-secondary)]"></div>
        <div class="w-12 h-0.5 bg-gradient-to-l from-transparent to-[var(--md-sys-color-secondary)]/50"></div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="about-content space-y-4">
      <!-- Bio Card -->
      <div class="card intro-card group relative animate-fade-in">
        <div class="absolute inset-0 bg-gradient-to-br from-[var(--md-sys-color-secondary)]/8 to-[var(--md-sys-color-primary)]/8 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl pointer-events-none"></div>
        
        <div class="absolute -top-8 -right-8 w-32 h-32 bg-gradient-to-br from-[var(--md-sys-color-secondary)]/15 to-[var(--md-sys-color-primary)]/15 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-700 pointer-events-none"></div>
        
        <div class="relative z-10 grid grid-cols-[auto_1fr] gap-4 md:gap-6">
          <div class="intro-left">
            <div class="avatar-wrapper relative">
              <div class="absolute inset-0 rounded-full bg-gradient-to-br from-[var(--md-sys-color-secondary)] to-[var(--md-sys-color-primary)] opacity-20 animate-pulse"></div>
              <div class="absolute inset-[-4px] rounded-full bg-gradient-to-br from-[var(--md-sys-color-secondary)] to-[var(--md-sys-color-primary)] opacity-0 group-hover:opacity-100 blur-sm transition-opacity duration-500"></div>
              
              <img 
                src={user.avatar} 
                alt={user.name}
                class="avatar relative z-10"
              />
              
              <!-- 在线状态指示器 -->
              <div class="absolute bottom-1 right-1 z-20 w-4 h-4 bg-green-500 rounded-full border-2 border-[var(--md-sys-color-surface)] shadow-lg">
                <div class="absolute inset-0 bg-green-400 rounded-full animate-ping"></div>
              </div>
            </div>
          </div>
          
          <div class="intro-right flex flex-col gap-2">
            <h3 class="name text-xl md:text-2xl font-700 bg-gradient-to-r from-[var(--md-sys-color-secondary)] to-[var(--md-sys-color-primary)] bg-clip-text text-transparent mb-1">
              {user.name}
            </h3>
            
            <p class="location flex items-center gap-1.5 text-xs md:text-sm text-[var(--md-sys-color-on-surface-variant)]">
              <i class="i-carbon:location text-base text-[var(--md-sys-color-secondary)]"></i>
              {user.location}
            </p>
            
            <p class="bio text-xs md:text-sm leading-relaxed text-[var(--md-sys-color-on-surface-variant)]/90 mt-1" data-user-content="bio">
              {userContent.bio}
            </p>
            
            <!-- 社交链接 - 美化版 -->
            <div class="social-links flex flex-wrap gap-2 mt-2">
              {user.socials.map((social, index) => (
                <a 
                  href={social.url} 
                  target="_blank" 
                  rel="noopener noreferrer"
                  class="social-link group/link"
                  aria-label={social.label}
                  title={social.label}
                  style={`animation-delay: ${index * 100 + 300}ms;`}
                >
                  <span class="social-icon-wrapper">
                    <i class={social.icon}></i>
                  </span>
                  <span class="social-label">{social.label}</span>
                  <i class="i-carbon:arrow-up-right text-xs opacity-0 group-hover/link:opacity-100 transition-all duration-300 group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5"></i>
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>

      <!-- 技能/工具网格 - 美化版 -->
      {aboutConfig.sections.slice(0, 2).map((section, sectionIndex) => (
        <div class="tools-section animate-fade-in" style={`animation-delay: ${sectionIndex * 150 + 400}ms;`}>
          <div class="tools-header flex items-center gap-2 mb-2">
            <div class="icon-wrapper inline-flex items-center justify-center w-8 h-8 bg-gradient-to-br from-[var(--md-sys-color-secondary-container)] to-[var(--md-sys-color-primary-container)] rounded-lg">
              <i class={`${section.icon} text-base text-[var(--md-sys-color-secondary)]`}></i>
            </div>
            <h3 class="text-base md:text-lg font-700 text-[var(--md-sys-color-on-surface)]" data-i18n={`about.${section.id}.title`}>{section.title}</h3>
          </div>
          <p class="tools-description text-xs text-[var(--md-sys-color-on-surface-variant)] mb-3" data-i18n={`about.${section.id}.subtitle`}>{section.description}</p>
          
          <div class={`tools-grid cols-${section.columns} ${section.compact ? 'compact' : ''}`}>
            {section.items.map((item, itemIndex) => (
              <a 
                href={item.url || '#'} 
                target={item.url ? '_blank' : undefined}
                rel={item.url ? 'noopener noreferrer' : undefined}
                class={`card-minimal tool-card group/tool animate-scale-in`}
                style={`animation-delay: ${itemIndex * 50 + sectionIndex * 150 + 500}ms;`}
              >
                <!-- 装饰性背景 -->
                <div class="absolute inset-0 bg-gradient-to-br from-[var(--md-sys-color-secondary)]/8 to-[var(--md-sys-color-primary)]/8 opacity-0 group-hover/tool:opacity-100 transition-opacity duration-400 rounded-xl pointer-events-none"></div>
                
                {item.icon && (
                  <div class="tool-icon-wrapper relative z-10">
                    <i class={`${item.icon} text-2xl text-[var(--md-sys-color-secondary)] group-hover/tool:scale-110 transition-transform duration-300`}></i>
                  </div>
                )}
                
                <div class="tool-info relative z-10">
                  <h4 class="text-sm font-600 text-[var(--md-sys-color-on-surface)] group-hover/tool:text-[var(--md-sys-color-secondary)] transition-colors leading-snug">
                    {item.name}
                  </h4>
                  {item.description && (
                    <p class="text-xs text-[var(--md-sys-color-on-surface-variant)]/80 leading-relaxed mt-0.5 line-clamp-2">
                      {item.description}
                    </p>
                  )}
                </div>
                
                <!-- 外链指示器 -->
                {item.url && (
                  <i class="i-carbon:arrow-up-right absolute top-2 right-2 text-sm text-[var(--md-sys-color-on-surface-variant)] opacity-0 group-hover/tool:opacity-100 transition-all duration-300 transform translate-x-1 -translate-y-1 group-hover/tool:translate-x-0 group-hover/tool:translate-y-0"></i>
                )}
              </a>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</div>

<style>
  /* Layout */
  .about-section {
    max-width: 1200px;
    width: 100%;
  }

  /* Avatar wrapper with hover animation */
  .avatar-wrapper {
    position: relative;
    width: 80px;
    height: 80px;
  }

  @media (min-width: 768px) {
    .avatar-wrapper {
      width: 100px;
      height: 100px;
    }
  }

  .avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    border: 3px solid var(--md-sys-color-surface);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .intro-card:hover .avatar {
    transform: scale(1.05);
  }

  /* Introduction card with glass-card base styles */
  .intro-card {
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .intro-card {
      padding: 2rem;
    }
  }

  .intro-card:hover {
    border-color: var(--md-sys-color-secondary);
  }

  .intro-left {
    display: flex;
    align-items: start;
  }

  .intro-right {
    min-width: 0;
  }

  .name {
    margin: 0;
    line-height: 1.2;
  }

  .location {
    margin: 0;
    font-weight: 500;
  }

  .bio {
    margin: 0;
  }

  /* Social links with pill-style design */
  .social-links {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .social-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.875rem;
    background: var(--md-sys-color-surface-container-high);
    border: 1px solid var(--md-sys-color-outline-variant);
    border-radius: 999px;
    text-decoration: none;
    color: var(--md-sys-color-on-surface-variant);
    font-size: 0.75rem;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    opacity: 0;
    animation: fade-in 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  @media (min-width: 768px) {
    .social-link {
      font-size: 0.8125rem;
    }
  }

  .social-link::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, 
      var(--md-sys-color-secondary-container),
      var(--md-sys-color-primary-container)
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .social-link:hover {
    border-color: var(--md-sys-color-secondary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .social-link:hover::before {
    opacity: 1;
  }

  .social-icon-wrapper {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .social-icon-wrapper i {
    font-size: 1rem;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .social-link:hover .social-icon-wrapper i {
    transform: scale(1.1);
  }

  .social-label {
    position: relative;
    z-index: 1;
  }

  /* Tools section layout */
  .tools-section {
    margin-bottom: 1rem;
  }

  .tools-header {
    margin-bottom: 0.75rem;
  }

  .tools-description {
    margin: 0;
    line-height: 1.6;
  }

  .tools-grid {
    display: grid;
    gap: 0.75rem;
  }

  .tools-grid.cols-2 { 
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 200px), 1fr)); 
  }
  
  .tools-grid.cols-3 { 
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 180px), 1fr)); 
  }
  
  .tools-grid.cols-4 { 
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 140px), 1fr)); 
  }

  .tools-grid.compact {
    gap: 0.5rem;
  }

  @media (min-width: 768px) {
    .tools-grid {
      gap: 1rem;
    }

    .tools-grid.compact {
      gap: 0.75rem;
    }
  }

  .tool-card {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: inherit;
    overflow: hidden;
    opacity: 0;
    transform: scale(0.9);
  }

  @media (min-width: 768px) {
    .tool-card {
      padding: 1.125rem;
    }
  }

  .tool-card:hover {
    border-color: var(--md-sys-color-secondary);
    transform: translateY(-4px) scale(1);
  }

  .tool-icon-wrapper {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
  }

  .tool-info {
    flex: 1;
    min-width: 0;
  }

  .tool-info h4 {
    margin: 0;
    line-height: 1.3;
  }

  .tool-info p {
    margin: 0;
    line-clamp: 2;
    line-height: 1.4;
  }

  /* Text truncation utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Animations */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-fade-in {
    opacity: 0;
    animation: fade-in 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .animate-scale-in {
    animation: scale-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  /* Icon wrapper pulsing glow animation */
  .section-header .icon-wrapper {
    animation: pulse-glow 2s ease-in-out infinite;
  }
  
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 0 0 var(--md-sys-color-secondary);
      opacity: 1;
    }
    50% {
      box-shadow: 0 0 20px 5px var(--md-sys-color-secondary);
      opacity: 0.8;
    }
  }

  /* Responsive optimization */
  @media (max-width: 640px) {
    .tools-grid {
      grid-template-columns: 1fr !important;
    }
    
    .intro-card {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  import { initI18n } from '../../scripts/i18n-content-updater';
  import { initUserContentI18n } from '../../scripts/i18n-user-content';
  
  initI18n();
  initUserContentI18n();
</script>
