---
/**
 * HeroSection Component
 * Fullscreen hero section with typewriter effects
 * Layout: text content (left) + avatar (right)
 */
import { user, getUserContent } from '../../data/user.config';
import { useI18n } from '../../utils/i18n';

const { t, currentLang } = useI18n();
const userContent = getUserContent(currentLang);
---

<section class="hero-section h-full w-full flex items-center justify-center relative overflow-hidden">
  
  <div class="container mx-auto px-4 sm:px-6 max-w-6xl relative z-10 pt-12 md:pt-0">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12 items-center">
      <!-- Text Content -->
      <div class="text-left space-y-4">
        <!-- Title with typewriter effect -->
        <div class="min-h-[80px] sm:min-h-[100px]">
          <h1 class="text-2xl sm:text-3xl md:text-4xl font-800 leading-tight">
            <span class="text-[var(--md-sys-color-on-surface)]">Hi, I'm </span>
            <span 
              id="name-typewriter"
              class="bg-gradient-to-r from-[var(--md-sys-color-primary)] to-[var(--md-sys-color-tertiary)] bg-clip-text text-transparent"
              data-text={user.name}
            ></span>
            <span class="inline-block text-xl ml-1">ðŸŒ»</span>
          </h1>
        </div>

        <!-- Description with typewriter effect -->
        <div class="min-h-[40px]">
          <p 
            id="description-typewriter"
            class="text-xs sm:text-sm text-[var(--md-sys-color-on-surface-variant)]/80 font-400 italic"
            data-text={userContent.tagline}
            data-user-content="tagline"
          ></p>
        </div>

        <!-- Bio with fade-in effect -->
        <div 
          id="bio-content"
          class="min-h-[60px] opacity-0 translate-y-[10px]"
        >
          <p class="text-sm sm:text-base text-[var(--md-sys-color-on-surface-variant)] font-400 leading-relaxed" data-user-content="bio">
            {userContent.bio}
          </p>
        </div>

        <!-- Social icons with scale animation -->
        <div id="social-icons-container" class="pt-2">
          <div class="flex items-center gap-2">
            {user.socials.map((social, index) => (
              <a 
                href={social.url} 
                target="_blank" 
                rel="noopener noreferrer"
                class="social-icon group relative opacity-0 scale-80"
                style={`animation-delay: ${index * 100}ms;`}
                aria-label={social.label}
                title={social.label}
              >
                <div class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-[var(--md-sys-color-surface-variant)]/50 backdrop-blur-sm border border-[var(--md-sys-color-outline)]/20 hover:border-[var(--md-sys-color-primary)]/50 hover:bg-[var(--md-sys-color-primary)]/10 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                  <i class={`${social.icon} text-base text-[var(--md-sys-color-on-surface-variant)] group-hover:text-[var(--md-sys-color-primary)] transition-colors`}></i>
                </div>
              </a>
            ))}
          </div>
        </div>
      </div>

      <!-- å³ä¾§ï¼šå¤§å¤´åƒ -->
      <div class="flex items-center justify-center lg:justify-end">
        <div class="relative avatar-container">
          <!-- èƒŒæ™¯è£…é¥°åœ† -->
          <div class="absolute inset-0 bg-gradient-to-br from-[var(--md-sys-color-primary)]/20 to-[var(--md-sys-color-tertiary)]/20 rounded-full blur-3xl animate-pulse"></div>
          
          <!-- å¤´åƒ -->
          <div class="relative">
            <img 
              src={user.avatar} 
              alt={user.name}
              class="relative w-32 h-32 sm:w-40 sm:h-40 lg:w-48 lg:h-48 rounded-full object-cover shadow-2xl ring-4 ring-[var(--md-sys-color-primary)]/30"
            />
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- æ»šåŠ¨æç¤º -->
  <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex flex-col items-center gap-1 animate-bounce">
    <span class="text-xs text-[var(--md-sys-color-on-surface-variant)]" data-i18n="home.hero.scroll">{t('home.hero.scroll')}</span>
    <i class="i-carbon:chevron-down text-xl text-[var(--md-sys-color-on-surface-variant)]"></i>
  </div>
</section>

<style>
  /* Typewriter cursor animation */
  #name-typewriter::after,
  #description-typewriter::after {
    content: '|';
    animation: blink 0.8s step-end infinite;
    margin-left: 2px;
  }

  #name-typewriter.typing-complete::after,
  #description-typewriter.typing-complete::after {
    display: none;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  /* Bio fade-up animation */
  #bio-content.fade-up {
    animation: fadeUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Social icon fade-scale animation */
  .social-icon.fade-scale {
    animation: fadeScale 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  @keyframes fadeScale {
    from {
      opacity: 0;
      transform: scale(0.8);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Avatar container fade-in animation */
  .avatar-container {
    animation: fadeIn 1s ease-out 0.5s backwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>

<script>
  import { initTypewriterEffect } from '../../scripts/animations/typewriter-effect';
  import { initI18n } from '../../scripts/i18n-content-updater';
  import { initUserContentI18n } from '../../scripts/i18n-user-content';
  
  initTypewriterEffect();
  initI18n();
  initUserContentI18n();
</script>

